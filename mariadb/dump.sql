CREATE TABLE IF NOT EXISTS `USERS` (
  `ID_USER` int NOT NULL AUTO_INCREMENT,
  `NAME` varchar(50) NOT NULL,
  `LASTNAME` varchar(50) NOT NULL,
  `USERNAME` varchar(50) NOT NULL,
  `PASSWORD` varchar(255) NOT NULL,
  UNIQUE (`USERNAME`),
  PRIMARY KEY (`ID_USER`)
);

CREATE TABLE IF NOT EXISTS `SERVICES` (
  `ID_SERVICE` int NOT NULL AUTO_INCREMENT,
  `LIB_SERVICE` varchar(50) NOT NULL,
  `DESCRIPTION` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`ID_SERVICE`)
);

CREATE TABLE IF NOT EXISTS `WIDGETS` (
  `ID_WIDGET` int NOT NULL AUTO_INCREMENT,
  `ID_SERVICE` int NOT NULL,
  `LIB_WIDGET` varchar(50) NOT NULL,
  `DESCRIPTION` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`ID_WIDGET`),
  FOREIGN KEY (`ID_SERVICE`) REFERENCES SERVICES(`ID_SERVICE`)
);

CREATE TABLE IF NOT EXISTS `USERS_WIDGETS` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `ID_USER` int NOT NULL,
  `ID_WIDGET` int NOT NULL,
  `PARAMETERS` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  FOREIGN KEY (`ID_USER`) REFERENCES USERS(`ID_USER`),
  FOREIGN KEY (`ID_WIDGET`) REFERENCES WIDGETS(`ID_WIDGET`)
);

INSERT INTO USERS (ID_USER, NAME, LASTNAME, USERNAME, PASSWORD) VALUES
  (1, 'Marie', 'Test', 'marie54', 'f2d81a260dea8a100dd517984e53c56a7523d96942a834b9cdc249bd4e8c7aa9'),
  (2, 'Axel', 'Test', 'axel54', 'f2d81a260dea8a100dd517984e53c56a7523d96942a834b9cdc249bd4e8c7aa9');

INSERT INTO SERVICES (ID_SERVICE, LIB_SERVICE, DESCRIPTION) VALUES
  (1, 'Intranet Epitech', NULL),
  (2, 'Météo', NULL);

INSERT INTO WIDGETS (ID_WIDGET, ID_SERVICE, LIB_WIDGET, DESCRIPTION) VALUES
  (1, 1, 'GPA', NULL),
  (2, 1, 'Notification', NULL),
  (3, 1, 'Absences', NULL),
  (4, 1, 'Nombre de crédits', NULL),
  (5, 2, 'Coucher du soleil', NULL),
  (6, 1, 'Levé du soleil', NULL),
  (7, 1, 'Température actuelle', NULL),
  (8, 1, 'Températures à venir', NULL);

INSERT INTO USERS_WIDGETS (ID, ID_USER, ID_WIDGET, PARAMETERS) VALUES
  (1, 1, 6, '{"city":"Nancy"}'),
  (2, 1, 5, '{"city":"Nancy"}'),
  (3, 1, 7, '{"city":"Nancy"}');